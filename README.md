# Анализатор страниц

[https://java-project-72-knl3.onrender.com](https://java-project-72-knl3.onrender.com)

[![Actions Status](https://github.com/ArturStimbiris/java-project-72/actions/workflows/hexlet-check.yml/badge.svg)](https://github.com/ArturStimbiris/java-project-72/actions)
[![codecov](https://codecov.io/gh/ArturStimbiris/java-project-72/branch/main/graph/badge.svg?token=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)](https://codecov.io/gh/ArturStimbiris/java-project-72)

Анализатор страниц — это учебный проект платформы Hexlet, который предоставляет возможность проверять веб-страницы на SEO-пригодность. Сервис позволяет анализировать HTML-страницы, извлекая важные метаданные, такие как заголовки, описания и ключевые элементы, которые влияют на поисковую оптимизацию.

## Функциональность

- **Добавление URL** для отслеживания и анализа
- **Проверка страниц** на наличие SEO-элементов:
  - Код ответа HTTP
  - Заголовок страницы (title)
  - Заголовок первого уровня (h1)
  - Мета-описание (description)
- **История проверок** с отображением предыдущих результатов
- **Визуальный интерфейс** для удобного просмотра данных

## Технологии и решения

Проект реализован с использованием современных Java-технологий и фреймворков:

### Backend
- **Javalin** — легковесный веб-фреймворк для обработки HTTP-запросов
- **HikariCP** — высокопроизводительный пул соединений с базой данных
- **Unirest** — HTTP-клиент для выполнения запросов к анализируемым страницам
- **Jsoup** — парсер HTML для извлечения метаданных со страниц

### База данных
- **H2** (в режиме in-memory для разработки и тестирования)
- **PostgreSQL** (для production-окружения)
- Миграции через SQL-скрипты

### Frontend
- **JTE** (Java Template Engine) для генерации HTML
- **Bootstrap** для стилизации и адаптивного дизайна

### Тестирование
- **JUnit 5** для модульного и интеграционного тестирования
- **MockWebServer** для тестирования HTTP-запросов
- **AssertJ** для удобных assertions в тестах

## Архитектурные решения

Проект следует принципам чистой архитектуры с разделением на слои:

1. **Модели данных** (Url, UrlCheck) — представляют бизнес-сущности
2. **Репозитории** — отвечают за взаимодействие с базой данных
3. **Сервисы** — содержат бизнес-логику (например, проверку URL)
4. **Контроллеры** — обрабатывают HTTP-запросы
5. **Шаблоны** — генерируют HTML-ответы

Для обработки ошибок и валидации используется комбинация исключений и flash-сообщений, которые отображаются пользователю.

## Сборка и запуск

Проект использует Gradle для управления зависимостями и сборки. Доступны следующие задачи:

- `./gradlew build` — сборка проекта
- `./gradlew test` — запуск тестов
- `./gradlew checkCode` — проверка кодстайла
- `./gradlew shadowJar` — создание исполняемого JAR-файла

Для запуска в production-окружении необходимо установить переменные окружения:
- `JDBC_DATABASE_URL` — URL для подключения к PostgreSQL
- `PORT` — порт для запуска приложения (по умолчанию 7070)

## Тестирование

Проект включает комплексные тесты, покрывающие:
- Обработку HTTP-запросов
- Взаимодействие с базой данных
- Проверку URL и извлечение метаданных
- Валидацию вводимых данных

Тесты используют in-memory базу данных H2 для изоляции и скорости выполнения.

---

Этот проект был разработан в рамках обучения на платформе Hexlet и демонстрирует практики разработки веб-приложений на Java.